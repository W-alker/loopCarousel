class LoopCarousel{constructor(t,e=0,i=8,s=!1,n="linear"){t.dataset.loopCarousel="true",this.el=t,this.scrollWidth=t.scrollWidth,this.spaceBetween=e||0,this.duration=i||8,this.timingFn=n||"linear",s&&(this.useJs=!0,this.jsAni=null,this.runPx=0,this.jsAniIsStop=!1)}appendNode(){let e=document.documentElement.clientWidth;var i=Array.from(this.el.children).map(t=>t.clientWidth);for(let t=0;t<i.length&&(e-=i[t],this.el.append(this.el.children[t].cloneNode()),!(e<=0));t++);}createJSAni(){const t=this.scrollWidth/this.duration/180;this.jsAni=()=>{this.runPx>=this.scrollWidth?this.runPx=0:this.runPx+=t,this.el.style.transform=`translateX(-${this.runPx}px)`,this.jsAniIsStop||window.requestAnimationFrame(this.jsAni)}}createCSSAni(){var t=this.scrollWidth+this.spaceBetween/2,t=`@keyframes loopCarousel_x_${this.scrollWidth} { to { transform: translateX(${-t}px); } }`,e=document.querySelector("style")[0]||document.createElement("style");e.innerHTML+=t,document.querySelector("style")[0]||document.querySelector("head").appendChild(e)}createAnimation(){this.useJs?this.createJSAni():this.createCSSAni()}runAnimation(){if(this.useJs)return this.jsAniIsStop=!1,this.jsAni();var t=`loopCarousel_x_${this.scrollWidth} ${this.duration}s infinite `+this.timingFn;this.el.style.animation=t}stopAnimation(){this.useJs?this.jsAniIsStop=!0:this.el.style.animation=""}}function loopCarousel(t,e=0,i=8,s=!1,n="linear"){if(!t.dataset.loopCarousel)return(t=new LoopCarousel(t,e,i,s,n)).appendNode(),t.createAnimation(),t.runAnimation(),t}export default loopCarousel;export{LoopCarousel,loopCarousel};